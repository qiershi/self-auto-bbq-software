import os
from PIL import Image

from multi_system.dummy import DummyWindowCapture

from core.ocr_engine import OCREngine

# from core.translator import translate

def test_ocr():
    # 1. 获取截图
    img_path = os.path.expanduser("~/图片/ocr_test/1.jpg")
    cap = DummyWindowCapture(img_path)
    img = cap.capture()

    # 2. 提取文字
    ocr = OCREngine(lang="japan")
    # en: 英语，german: 德语, japan: 日语，zh: 简体中文
    text = ocr.predict(img)
    
    string = ""
    for idx in range(len(text)):
        string += text[idx]

    print(text)
    print(string)
    
    # result = ocr.predict(img)
    # best = pick_effective_text(result[0])
    # if best:
    #     print(best["text"])
    #     print(best["bbox"])

    # 3. 翻译文本
    # print(translate(string))

    assert False

